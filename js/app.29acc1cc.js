(function(t){function e(e){for(var a,l,n=e[0],r=e[1],c=e[2],u=0,h=[];u<n.length;u++)l=n[u],i[l]&&h.push(i[l][0]),i[l]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,n=1;n<s.length;n++){var r=s[n];0!==i[r]&&(a=!1)}a&&(o.splice(e--,1),t=l(l.s=s[0]))}return t}var a={},i={app:0},o=[];function l(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.m=t,l.c=a,l.d=function(t,e,s){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)l.d(s,a,function(e){return t[e]}.bind(null,a));return s},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=r;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"010a":function(t,e,s){},"034f":function(t,e,s){"use strict";var a=s("64a9"),i=s.n(a);i.a},"07df":function(t,e,s){},"0fcd":function(t,e,s){"use strict";var a=s("eee8"),i=s.n(a);i.a},"1f25":function(t,e,s){"use strict";var a=s("c58f"),i=s.n(a);i.a},"205a":function(t,e,s){"use strict";var a=s("9174"),i=s.n(a);i.a},"35ab":function(t,e,s){},"3f55":function(t,e,s){"use strict";var a=s("ea61"),i=s.n(a);i.a},"43d4":function(t,e,s){"use strict";var a=s("5395"),i=s.n(a);i.a},"491e":function(t,e,s){"use strict";var a=s("bbdf"),i=s.n(a);i.a},5395:function(t,e,s){},5460:function(t,e,s){},5656:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),i=(s("4d8c"),s("8aa5")),o=s.n(i),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"main-container"},[s("Navbar",{on:{logout:function(e){return t.logout()}}}),s("div",{staticClass:"sub-container"},[s("router-view")],1)],1),s("Dialog")],1)},n=[];class r{constructor(t){this.user=null,t||(this.db=o.a.firestone()),this.db=t}signup(t,e){o.a.auth().createUserWithEmailAndPassword(t,e).then(t=>{this.user=t,console.log("Signed Up!",t)},t=>{console.error(t)})}login(t,e){return o.a.auth().signInWithEmailAndPassword(t,e).then(async t=>{return this.user=t,this.user.info={},await this.retrieveUserInfo(t.user.uid),new Promise((t,e)=>{t(!0)})}).catch(t=>{return new Promise((t,e)=>{e(!1)})})}logout(){console.log("LOGOUT"),this.isUserLogged()&&o.a.auth().signOut().then(()=>this.user=null,t=>console.error("error=",t))}getUser(){return this.user}isUserLogged(){return null!=this.user}async retrieveUserInfo(t){console.log("RETIREVEEE"),await this.db.collection("users").doc(t).get().then(t=>{this.user.info=t.data(),console.log(this.user.info)})}}var c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar-container"},[s("router-link",{staticClass:"navbar-standard-button",attrs:{to:"/boards"}},[t._v("Boards")]),s("span",{staticClass:"float-right",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$emit("logout")}}},[t._v("Logout")])],1)},d=[],u={name:"Navbar"},h=u,b=(s("43d4"),s("2877")),m=Object(b["a"])(h,c,d,!1,null,"3cbaa691",null),v=m.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.iContainer.placeholder?t._e():s("div",{staticClass:"container-main"},[s("div",{staticClass:"container-header"},[s("h4",{staticClass:"container-title"},[t._v(t._s(t.iContainer.title))]),s("span",{staticClass:"container-options",on:{click:function(e){return t.optionsClicked()}}},[s("font-awesome-icon",{attrs:{icon:"ellipsis-h"}})],1)]),s("div",[t._l(t.iContainer.cards,(function(e,a){return[e.placeholder?t._e():s("Card",{key:e.id,attrs:{index:a,iCard:e,iListId:t.iContainer.id},on:{"save-board":function(e){return t.onSaveBoard()},"save-card":function(e){return t.onSaveCard(e)},"save-card-labels":function(e){return t.onSaveCardLabels(e)}}}),e.placeholder?s("div",{key:a,staticClass:"container-card-placeholder",style:e.style}):t._e()]})),t.showAddCard?s("div",[s("AutoresizeTextarea",{staticClass:"add-card-textarea",model:{value:t.newCardText,callback:function(e){t.newCardText=e},expression:"newCardText"}}),s("div",[s("Button",{attrs:{label:"Add",classes:["success"]},on:{click:function(e){return t.addCard()}}}),s("span",{staticClass:"add-close",on:{click:function(e){return t.closeAddCard()}}},[s("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)],1):t._e()],2),t.showAddCard?t._e():s("div",{staticClass:"container-footer",on:{click:function(e){return t.openAddCard()}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add Another Card")],1)]),t.iContainer.placeholder?s("div",{staticClass:"container-main",style:t.iContainer.style}):t._e()])},p=[],C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-container",on:{mouseenter:function(e){return t.mouseEnter()},mouseleave:function(e){return t.mouseLeave()}}},[s("div",{staticClass:"card-body",on:{click:function(e){return t.openAdvancedEdit()}}},[s("div",{staticClass:"card-labels"},t._l(t.iCard.labels,(function(t,e){return s("Label",{key:e,attrs:{text:t.text,color:t.color}})})),1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showOptionsButton,expression:"showOptionsButton"}],staticClass:"card-options",on:{click:function(e){return t.editCard(e)}}},[s("font-awesome-icon",{attrs:{icon:"pen"}})],1),s("div",{staticClass:"card-text"},[t._v(t._s(t.iCard.text))]),s("div",{staticClass:"card-footer"}),t.showEdit?s("CardEdit",{attrs:{iText:t.iCard.text,iLabels:t.iCard.labels},on:{"close-edit":function(e){return t.closeEdit()},"update-text":function(e){return t.updateText(e)},"select-label":function(e){return t.onSelectLabel(e)}}}):t._e()],1)])},w=[],g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"card-label",class:t.color},[t._v(t._s(t.text))])},_=[],x={name:"Label",props:["text","color"]},S=x,L=(s("c805"),Object(b["a"])(S,g,_,!1,null,"8d4f136e",null)),y=L.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-edit",attrs:{id:t.id}},[s("div",{staticClass:"card-editor-back",on:{click:function(e){return t.hide(e)}}}),s("div",{staticClass:"card-editor-container",on:{click:function(e){return t.stopPropagation(e)}}},[s("div",{staticClass:"card-textarea-container"},[s("div",{staticClass:"card-textarea-bg"},[t._l(t.iLabels,(function(t,e){return s("Label",{key:e,attrs:{text:t.text,color:t.color}})})),s("AutoresizeTextarea",{attrs:{classes:"font-110 font-20"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],2),s("button",{staticClass:"button",on:{click:function(e){return t.save()}}},[t._v("Save")])]),s("div",{staticClass:"card-options-container slide-in-left"},[s("div",{staticClass:"card-option-wrapper"},[s("span",{staticClass:"card-option",on:{click:function(e){return t.editLabels()}}},[s("font-awesome-icon",{attrs:{icon:"tags"}}),t._v(" Edit Labels")],1),t.showEditLabels?s("EditLabels",{attrs:{iLabels:t.iLabels},on:{closeLabels:function(e){return t.closeEditLabels()},selectLabel:function(e){return t.onSelectLabel(e)}}}):t._e()],1),s("div",{staticClass:"card-option-wrapper"},[s("span",{staticClass:"card-option"},[s("font-awesome-icon",{attrs:{icon:"user"}}),t._v(" Change Members")],1)]),s("div",{staticClass:"card-option-wrapper"},[s("span",{staticClass:"card-option"},[s("font-awesome-icon",{attrs:{icon:"arrow-right"}}),t._v(" Move")],1)]),s("div",{staticClass:"card-option-wrapper"},[s("span",{staticClass:"card-option"},[s("font-awesome-icon",{attrs:{icon:"clone"}}),t._v(" Copy")],1)]),s("div",{staticClass:"card-option-wrapper"},[s("span",{staticClass:"card-option"},[s("font-awesome-icon",{attrs:{icon:"clock"}}),t._v(" Change Due Date")],1)]),s("div",{staticClass:"card-option-wrapper"},[s("span",{staticClass:"card-option"},[s("font-awesome-icon",{attrs:{icon:"archive"}}),t._v(" Archive")],1)])])])])},A=[],E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("textarea",{ref:"textarea",class:t.classes,attrs:{autofocus:t.iAutoFocus},domProps:{value:t.iValue},on:{input:function(e){return t.$emit("input",e.target.value)}}})},B=[],T={name:"AutoresizeTextarea",props:["iValue","iInitialSize","classes","iAutoFocus"],model:{prop:"iValue",event:"input"},data(){return{currentSize:this.iInitialSize||25}},methods:{resize(){this.$refs["textarea"].style.height="auto",this.$refs["textarea"].style.height=this.$refs["textarea"].scrollHeight+"px"}},mounted(){setTimeout(this.resize.bind(this),10),this.$refs["textarea"].addEventListener("input",this.resize)},beforeDestroy(){this.$refs["textarea"].removeEventListener("input",this.resize)}},I=T,D=(s("205a"),Object(b["a"])(I,E,B,!1,null,"24945e1d",null)),O=D.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"test",staticClass:"card-option-edit-labels"},[s("div",{staticClass:"card-option-edit-labels-header"},[t.addLabel||t.modifyLabel?s("span",{staticClass:"back-arrow",on:{click:function(e){return t.onCloseAddNewLabel()}}},[s("font-awesome-icon",{attrs:{icon:"arrow-left"}})],1):t._e(),s("h4",[t._v("Edit Labels")]),s("span",{staticClass:"card-option-edit-labels-header-close",on:{click:function(e){return t.$emit("closeLabels")}}},[s("font-awesome-icon",{attrs:{icon:"times"}})],1)]),s("div",{staticClass:"card-option-edit-labels-body",style:t.bodyStyle},[t.showLabels?[t._l(t.labels,(function(e,a){return s("div",{key:e.text+a,staticClass:"label"},[s("span",{staticClass:"label-inner",class:e.color,on:{click:function(e){return t.selectLabel(a)}}},[t._v("\n                    "+t._s(e.text)+"\n                    "),t.iLabels.find((function(t){return t.id==e.id}))?s("span",{staticClass:"label-inner-selected"},[s("font-awesome-icon",{attrs:{icon:"check"}})],1):t._e()]),s("span",{staticClass:"label-inner-edit",class:e.color,on:{click:function(e){return t.editLabel(a)}}},[s("font-awesome-icon",{attrs:{icon:"pen"}})],1)])})),s("div",{staticClass:"label-new",on:{click:function(e){return t.onAddNewLabel(e)}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Create New Label")],1)]:t._e(),t.addLabel||t.modifyLabel?[s("label",[t._v("\n                Name\n                "),s("Input",{attrs:{iAutofocus:"true"},model:{value:t.labelName,callback:function(e){t.labelName=e},expression:"labelName"}})],1),s("div",{staticClass:"label-edit-color-container"},[s("div",{staticClass:"label-edit-color blue",class:{selected:"blue"===t.labelColor},on:{click:function(e){return t.selectColor("blue")}}}),s("div",{staticClass:"label-edit-color red",class:{selected:"red"===t.labelColor},on:{click:function(e){return t.selectColor("red")}}}),s("div",{staticClass:"label-edit-color white",class:{selected:"white"===t.labelColor},on:{click:function(e){return t.selectColor("white")}}}),s("div",{staticClass:"label-edit-color orange",class:{selected:"orange"===t.labelColor},on:{click:function(e){return t.selectColor("orange")}}}),s("div",{staticClass:"label-edit-color green",class:{selected:"green"===t.labelColor},on:{click:function(e){return t.selectColor("green")}}}),s("div",{staticClass:"label-edit-color purple",class:{selected:"purple"===t.labelColor},on:{click:function(e){return t.selectColor("purple")}}}),s("div",{staticClass:"label-edit-color black",class:{selected:"black"===t.labelColor},on:{click:function(e){return t.selectColor("black")}}}),s("div",{staticClass:"label-edit-color yellow",class:{selected:"yellow"===t.labelColor},on:{click:function(e){return t.selectColor("yellow")}}}),s("div",{staticClass:"label-edit-color gray",class:{selected:"gray"===t.labelColor},on:{click:function(e){return t.selectColor("gray")}}})]),s("div",[s("Button",{staticClass:"margin-tbr-5",attrs:{label:t.btnEditLabel,classes:"success",disabled:""==t.labelName||""==t.labelColor},on:{click:function(e){return t.onEditLabel()}}}),t.modifyLabel?s("Button",{staticClass:"margin-tbr-5",attrs:{label:"Delete",classes:"error"},on:{click:function(e){return t.onDeleteLabel()}}}):t._e()],1)]:t._e()],2)])},M=[],N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("input",{ref:"input",attrs:{type:t.iType||"text",autofocus:t.autofocus},domProps:{value:t.iValue},on:{input:function(e){return t.$emit("input",e.target.value)},blur:function(e){return t.$emit("blur",e)}}})},j=[],P={name:"Input",props:["iValue","iAutofocus","iType"],model:{prop:"iValue",event:"input"},data(){return{model:"",autofocus:this.iAutofocus}},mounted(){this.autofocus&&this.$refs["input"].focus()}},R=P,z=(s("86c6"),Object(b["a"])(R,N,j,!1,null,"085194f6",null)),U=z.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{class:t.classes,attrs:{title:t.label,disabled:t.innerDisabled},on:{click:function(e){return t.$emit("click",e)}}},[s("span",{staticClass:"float-left"},[t._t("default")],2),s("span",[t._v(t._s(t.label))])])},q=[],H={name:"Button",props:["label","disabled","classes"],computed:{innerDisabled:function(){return this.disabled}}},F=H,G=(s("847a"),Object(b["a"])(F,V,q,!1,null,"f526f4b0",null)),J=G.exports,Q={name:"EditLabels",props:["iLabels"],inject:["labelsService"],components:{Label:y,Input:U,Button:J},data(){return{bodyStyle:null,onResizeSubscription:null,showLabels:!0,labelName:"",labelColor:"",editedLabel:-1,modifyLabel:!1,addLabel:!1,btnEditLabel:"",labels:[],editedIdLabel:null,labelSubscription:null}},methods:{onResize:function(){var t=this.$refs["test"].getBoundingClientRect();let e={maxHeight:window.innerHeight-t.top-55+"px"};this.bodyStyle=e},selectLabel(t){this.$emit("selectLabel",this.labels[t])},editLabel:function(t){this.showLabels=!1,this.modifyLabel=!0,this.editedLabel=t,this.editedIdLabel=this.labels[t].id,this.labelName=this.labels[t].text,this.labelColor=this.labels[t].color,this.btnEditLabel="Edit"},onEditLabel(t){this.modifyLabel&&this.editedLabel>-1?this.labelsService.modifyLabel(this.editedLabel,this.labelName,this.labelColor):this.addLabel&&this.labelsService.addLabel({text:this.labelName,color:this.labelColor}),this.reset()},onAddNewLabel(t){this.showLabels=!1,this.addLabel=!0,this.btnEditLabel="Create"},onCloseAddNewLabel(){this.showLabels=!0,this.addLabel=!1,this.modifyLabel=!1,this.labelName="",this.labelColor=""},selectColor(t){this.labelColor=t},onDeleteLabel(){this.labelsService.deleteLabel(this.editedLabel),this.reset()},reset(){this.showLabels=!0,this.modifyLabel=!1,this.addLabel=!1,this.editedLabel=-1,this.labelName="",this.labelColor=""}},mounted(){this.onResizeSubscription=!0,this.onResize(),window.addEventListener("resize",this.onResize),this.labelSubscription=this.labelsService.labels.subscribe(t=>{this.labels=t})},beforeDestroy(){this.onResizeSubscription&&(this.onResizeSubscription=!1,window.removeEventListener("resize",this.onResize)),this.labelSubscription&&this.labelSubscription.unsubscribe()}},W=Q,X=(s("1f25"),Object(b["a"])(W,$,M,!1,null,"0c658c43",null)),Z=X.exports,K=0,Y={name:"CardEdit",props:["iText","iLabels"],components:{Label:y,AutoresizeTextarea:O,EditLabels:Z},data(){return{text:"",id:"card-edit"+K++,showEditLabels:!1}},methods:{save(){this.$emit("close-edit"),this.$emit("update-text",this.text)},hide(t){this.$emit("close-edit"),t.stopPropagation()},editLabels(){this.showEditLabels=!0},closeEditLabels(){this.showEditLabels=!1},textarea_listener(){this.$refs["textarea"].style.height=this.$refs["textarea"].scrollHeight+"px"},stopPropagation(t){t.stopPropagation()},onSelectLabel(t){this.$emit("select-label",t)}},mounted(){this.text=this.iText},beforeDestroy(){}},tt=Y,et=(s("88ea"),Object(b["a"])(tt,k,A,!1,null,"89c3d930",null)),st=et.exports,at=0,it={name:"Card",props:["iCard","index","iListId"],components:{Label:y,CardEdit:st},inject:["labelsService","modalsService"],data:function(){return{showOptionsButton:!1,showEdit:!1,id:"card-"+at++,labels:[],showAdvancedOption:!1,modal:null,labelsSubscriptions:[]}},mounted:function(){this.setupCardLabels(),this.labelsSubscriptions.push(this.labelsService.eventDispatcher.subscribe("add-label",this.setupCardLabels)),this.labelsSubscriptions.push(this.labelsService.eventDispatcher.subscribe("delete-label",this.onDeleteLabel))},beforeDestroy(){this.labelsSubscriptions&&this.labelsSubscriptions.forEach(t=>t.unsubscribe())},methods:{mouseEnter:function(){this.showOptionsButton=!0},mouseLeave:function(){this.showOptionsButton=!1},editCard:function(t){this.showOptionsButton=!1,this.showEdit=!0,t.stopPropagation()},closeEdit(){this.showEdit=!1},updateText(t){this.iCard.text=t,this.$emit("save-card",this.iCard)},openAdvancedEdit(){this.iCard.cardInfo.get().then(t=>{let e=Object.assign({},this.iCard,t.data());this.modalsService.toggleModal("cardAdvancedEditModal",e)})},onSelectLabel(t){console.log("LABEL SELECTED");const e=this.iCard.labels.findIndex(e=>e.id===t.id);e>=0?this.iCard.labels.splice(e,1):this.iCard.labels.push(t),this.$emit("save-card-labels",this.iCard)},onDeleteLabel(t){const e=this.iCard.labels.findIndex(e=>e.id===t.id);e>=0&&this.iCard.labels.splice(e,1),this.$emit("save-card-labels",this.iCard)},setupCardLabels(){if(this.labelsService.labels.values){let t={};this.iCard.labels.forEach(e=>{t[null!=e.id?e.id:e]=!0}),this.iCard.labels=[],this.labelsService.labels.values.forEach(e=>{t[e.id]&&this.iCard.labels.push(e)})}}}},ot=it,lt=(s("f979"),Object(b["a"])(ot,C,w,!1,null,"263131c4",null)),nt=lt.exports,rt={name:"CardsContainer",props:["iContainer","index"],components:{Card:nt,AutoresizeTextarea:O,Button:J},data(){return{showAddCard:!1,newCardText:""}},methods:{optionsClicked(){console.log("optionsClicked")},openAddCard(){this.newCardText="",this.showAddCard=!0},closeAddCard(){this.newCardText="",this.showAddCard=!1},addCard(){this.$emit("addCard",{container:this.index,text:this.newCardText}),this.closeAddCard()},onSaveBoard(){console.log("SAVE BOARD"),this.$emit("save-board")},onSaveCard(t){console.log("SAVE CARD"),this.$emit("save-card",{card:t,list:this.iContainer})},onSaveCardLabels(t){console.log("SAVE CARD LABELS"),this.$emit("save-card-labels",{card:t,list:this.iContainer})}}},ct=rt,dt=(s("b0d5"),Object(b["a"])(ct,f,p,!1,null,"281be7d5",null)),ut=dt.exports,ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show__?s("div",{staticClass:"modal-background",on:{click:function(e){return t.hide(e)}}},[s("div",{staticClass:"modal-container"},[s("div",{attrs:{clasS:"modal-content"},on:{click:function(e){return t.intercept(e)}}},[s("div",{staticClass:"modal-header-title"},[t._v("\n                "+t._s(t.text)+"\n            ")]),s("div",{staticClass:"modal-body"},[t._v("\n                "+t._s(t.comment)+"\n            ")])])])]):t._e()},bt=[];class mt{constructor(){this.isOpen=!1,this.modal=null}setModal(t){console.log(t),this.modal=t}open(){this.isOpen=!0,this.modal&&this.modal.show()}close(){this.isOpen=!1,this.modal&&this.modal.hide()}toggle(t){this.isOpen=!this.isOpen,this.modal&&this.modal.toggle(t)}setOpen(t){this.isOpen=t}}var vt={name:"Dialog",components:{Button:J},inject:["modalsService"],data(){return{show__:!1,text:"TestTestTestTestTestTestTestTestTestTestTestT",comment:"",user:{initials:"AC",username:"Alberto Contorno"},showMoreDetails:!1,detail:"",controller:new mt}},methods:{show(){this.show__=!0},hide(t){this.show__=!1,t&&t.stopPropagation()},intercept(t){t&&t.stopPropagation()},toggle(t){this.show__=!this.show__,this.text=t.text,this.comment=t.comment},addMoreDetails(){this.showMoreDetails=!0},closeMoreDetails(){this.showMoreDetails=!1}},mounted:function(){this.controller=this.modalsService.registerModal("mainDialog",this)},beforeDestroy(){this.modalsService.unregisterModal("mainDialog")}},ft=vt,pt=(s("491e"),Object(b["a"])(ft,ht,bt,!1,null,"22b5e672",null)),Ct=pt.exports,wt={name:"App",components:{Navbar:v,CardsContainer:ut,Dialog:Ct},inject:["authService","modalsService"],data(){return{}},methods:{logout(){this.authService.logout()}}},gt=wt,_t=(s("034f"),Object(b["a"])(gt,l,n,!1,null,null,null)),xt=_t.exports,St=s("8c4f"),Lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"board"},[t._l(t.cardsContainers,(function(e,a){return s("CardsContainer",{key:e.id,attrs:{iContainer:e,index:a},on:{addCard:function(e){return t.onAddCard(e)},"save-board":function(e){return t.onSaveBoard()},"save-card":function(e){return t.onSaveCard(e)},"save-card-labels":function(e){return t.onSaveCardLabels(e)}}})})),s("div",[s("AddNewContainer",{on:{"add-list":function(e){return t.onAddNewList(e)}}})],1),s("Modal")],2)},yt=[],kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"new-list"},[t.showAddButton?s("div",{staticClass:"new-list-title",on:{click:function(e){return t.showAddNewList()}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" Add New List")],1):t._e(),t.showAddButton?t._e():s("div",{staticClass:"new-list-input"},[s("label",[t._v("Title\n            "),s("div",[s("Input",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]),s("div",[s("Button",{attrs:{label:"Save",classes:"success btn",disabled:""==t.value},on:{click:function(e){return t.addList()}}}),s("span",{staticClass:"add-close",on:{click:function(e){return t.closeAddList()}}},[s("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)])])},At=[],Et={name:"AddNewContainer",components:{Button:J,Input:U},data(){return{value:"",showAddButton:!0}},methods:{showAddNewList(){this.showAddButton=!1},addList(){this.value&&""!==this.value&&(this.showAddButton=!0,this.$emit("add-list",this.value.trim()),this.value="")},closeAddList(){this.value="",this.showAddButton=!0}}},Bt=Et,Tt=(s("0fcd"),Object(b["a"])(Bt,kt,At,!1,null,"62405d84",null)),It=Tt.exports,Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show__?s("div",{staticClass:"modal-background",on:{click:function(e){return t.hide(e)}}},[s("div",{staticClass:"modal-container"},[s("div",{attrs:{clasS:"modal-content"},on:{click:function(e){return t.intercept(e)}}},[s("div",{staticClass:"modal-header"},[s("div",{staticClass:"modal-header-title"},[s("div",{staticClass:"modal-header-icon left-icon"},[s("font-awesome-icon",{attrs:{icon:"chalkboard"}})],1),s("div",{staticClass:"modal-header-text"},[s("AutoresizeTextarea",{attrs:{classes:"font-bold font-20"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),s("div",{staticClass:"modal-header-text-sub"},[t._v("in lista "+t._s(t.listTitle))]),s("div",{staticClass:"modal-header-labels"},t._l(t.labels,(function(t){return s("Label",{key:t.id,attrs:{text:t.text,color:t.color}})})),1),s("span",{staticClass:"modal-header-close",on:{click:function(e){return t.hide(e)}}},[s("font-awesome-icon",{attrs:{icon:"times"}})],1)],1)])]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"modal-body-left-col"},[s("div",{staticClass:"modal-body-left-row first"},[s("div",{staticClass:"modal-body-left-row-left"},[s("font-awesome-icon",{staticClass:"left-icon",attrs:{icon:"align-left"}})],1),s("div",{staticClass:"modal-body-left-row-right"},[t._v("\n                            Description\n                            "),t.showMoreDetails||t.detail?t._e():s("div",{staticClass:"modal-gray-area",on:{click:function(e){return t.addMoreDetails()}}},[t._v("Add a more detailed description...")]),!t.showMoreDetails&&t.detail?s("div",{staticClass:"modal-gray-area",on:{click:function(e){return t.addMoreDetails(t.detail)}}},[t._v(t._s(t.detail))]):t._e(),t.showMoreDetails?s("div",[s("AutoresizeTextarea",{staticClass:"modal-comment",attrs:{iAutoFocus:"true"},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}}),s("div",[s("Button",{attrs:{label:"Save",classes:"success"}}),s("font-awesome-icon",{staticClass:"modal-close-more-details",attrs:{icon:"times"},on:{click:function(e){return t.closeMoreDetails()}}})],1)],1):t._e()])]),s("div",{staticClass:"modal-body-left-row no-margin-bottom"},[s("div",{staticClass:"modal-body-left-row-left"},[s("font-awesome-icon",{staticClass:"left-icon",attrs:{icon:"comment"}})],1),s("div",{staticClass:"modal-body-left-row-right"},[t._v("\n                            Add Comment\n                        ")])]),s("div",{staticClass:"modal-body-left-row no-margin-top"},[s("div",{staticClass:"modal-body-left-row-left"},[s("UserBadge",{attrs:{initials:t.user.initials,username:t.user.username}})],1),s("div",{staticClass:"modal-body-left-row-right"},[s("AutoresizeTextarea",{staticClass:"modal-comment",model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),s("Button",{attrs:{label:"Save",classes:"success"}})],1)]),t._l(t.checkLists,(function(t,e){return s("div",{key:e,staticClass:"modal-body-left-row no-margin-bottom"},[s("div",{staticClass:"modal-body-left-row-left"},[s("font-awesome-icon",{staticClass:"left-icon",attrs:{icon:"list"}})],1),s("div",{staticClass:"modal-body-left-row-right"},[s("CheckList",{attrs:{iItems:t.items,iTitle:t.title}})],1)])})),s("div",{staticClass:"modal-body-left-row no-margin-bottom"},[s("div",{staticClass:"modal-body-left-row-left"},[s("font-awesome-icon",{staticClass:"left-icon",attrs:{icon:"list"}})],1),t._m(0)]),t._l([1,2,3],(function(e){return s("div",{staticClass:"modal-body-left-row"},[s("div",{staticClass:"modal-body-left-row-left"},[s("UserBadge",{attrs:{initials:t.user.initials,username:t.user.username}})],1),s("div",{staticClass:"modal-body-left-row-right"},[s("ActivityLog")],1)])}))],2),s("div",{staticClass:"modal-body-right-col"},[s("div",{staticClass:"modal-body-buttons-title first"},[t._v("ADD TO CARD")]),s("ul",{staticClass:"modal-body-buttons-container"},[s("li",[s("button",{staticClass:"modal-body-button"},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"user"}}),t._v("Members")],1)]),s("li",[s("button",{staticClass:"modal-body-button"},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"tags"}}),t._v("Labels")],1)]),s("li",[s("button",{staticClass:"modal-body-button"},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"check-square"}}),t._v("Checklist")],1)]),s("li",[s("button",{staticClass:"modal-body-button"},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"clock"}}),t._v("Deadline")],1)]),s("li",[s("button",{staticClass:"modal-body-button"},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"paperclip"}}),t._v("Attachment")],1)])]),s("div",{staticClass:"modal-body-buttons-title"},[t._v("ACTIONS")]),s("ul",{staticClass:"modal-body-buttons-container"},[s("li",[s("button",{staticClass:"modal-body-button"},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"arrow-right"}}),t._v("Move")],1)]),s("li",[s("button",{staticClass:"modal-body-button"},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"copy"}}),t._v("Copy")],1)]),s("li",[s("button",{staticClass:"modal-body-button"},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"eye"}}),t._v("Watch")],1)]),s("li",[s("button",{staticClass:"modal-body-button"},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"archive"}}),t._v("Archive")],1)]),s("li",[s("button",{staticClass:"modal-body-button"},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"share-alt"}}),t._v("Share")],1)])])])])])])]):t._e()},Ot=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-body-left-row-right"},[t._v("\n                            Activities "),s("span",{staticStyle:{float:"right"}},[s("button",{staticClass:"modal-body-button modal-hide-details"},[t._v("Hide Details")])])])}],$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"user-badge-circle"},[s("span",{staticClass:"user-badge-circle-initials",attrs:{title:"username"}},[t._v("\n        "+t._s(t.initials)+"\n    ")])])},Mt=[],Nt={name:"user-badge",props:["username","initials"]},jt=Nt,Pt=(s("3f55"),Object(b["a"])(jt,$t,Mt,!1,null,"f1eb2c6e",null)),Rt=Pt.exports,zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12"},[s("font-awesome-icon",{attrs:{icon:"check-square"}}),t._v(" "+t._s(t.iTitle)+"\n            "),s("button",{staticClass:"modal-body-button margin-t--5"},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"times"}}),t._v("Delete")],1)],1)]),s("ProgressBar",{attrs:{iValue:t.progressValue,iEndLabel:t.progressValue}}),t._l(t.items,(function(e,a){return s("div",{key:a,staticClass:"row"},[s("div",{staticClass:"col-xs"},[s("font-awesome-icon",{staticClass:"clickable",attrs:{icon:e.item.done?"check-square":"square"},on:{click:function(e){return t.toggleCheck(a)}}}),e.editing?t._e():s("span",{staticClass:"item-text",on:{click:function(e){return t.editItem(a)}}},[t._v(t._s(e.item.text))]),e.editing?[s("Input",{staticStyle:{width:"auto",display:"inline-block","margin-left":"10px"},attrs:{iAutofocus:"true"},model:{value:e.item.text,callback:function(s){t.$set(e.item,"text",s)},expression:"item.item.text"}}),s("Button",{attrs:{label:"Save",classes:"success"},on:{click:function(e){return t.onEditItem(a)}}}),s("font-awesome-icon",{staticClass:"new-item-close",attrs:{icon:"times"},on:{click:function(e){return t.onCloseEditItem(a)}}})]:t._e()],2)])})),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs"},[t.showAddNewItem?[s("AutoresizeTextarea",{staticClass:"modal-comment",model:{value:t.newItemText,callback:function(e){t.newItemText=e},expression:"newItemText"}}),s("Button",{attrs:{label:"Save",classes:"success"},on:{click:function(e){return t.onSaveItem()}}}),s("font-awesome-icon",{staticClass:"new-item-close",attrs:{icon:"times"},on:{click:function(e){t.showAddNewItem=!1}}})]:t._e(),t.showAddNewItem?t._e():[s("button",{staticClass:"modal-body-button float-left margin-tb-5",on:{click:function(e){return t.onAddItem()}}},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"plus"}}),t._v("Add Item")],1)]],2)])],2)},Ut=[],Vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12",staticStyle:{display:"flex"}},[s("span",{staticClass:"progressbar-start-label"},[t._v(" "+t._s(t.iStartLabel))]),s("span",{staticClass:"progressbar-container"},[s("span",{staticClass:"progress-bar progressbar-bar-bg",style:{backgroundColor:t.iColorBg}}),s("span",{staticClass:"progress-bar progressbar-bar-progress",style:{backgroundColor:t.iColor,width:t.iValue||0}})]),s("span",{staticClass:"progressbar-end-label"},[t._v(" "+t._s(t.iEndLabel))])])])},qt=[],Ht={name:"progressBar",props:["iColorBg","iColor","iStartLabel","iEndLabel","iValue"]},Ft=Ht,Gt=(s("aa09"),Object(b["a"])(Ft,Vt,qt,!1,null,null,null)),Jt=Gt.exports,Qt={name:"checklist",components:{ProgressBar:Jt,Button:J,AutoresizeTextarea:O,Input:U},props:["iItems","iTitle"],data(){return{showAddNewItem:!1,newItemText:null,items:[],progressValue:"0%"}},mounted(){this.iItems.forEach(t=>{this.items.push({item:t,editing:!1})}),this.calculatePercentage()},methods:{onAddItem(){this.showAddNewItem=!0},onSaveItem(){let t={item:{text:this.newItemText,done:!1},editing:!1};this.items.push(t),this.$emit("addItemChecklist",t),this.newItemText="",this.showAddNewItem=!1,this.calculatePercentage()},toggleCheck(t){this.items[t]&&(this.items[t].item.done=!this.items[t].item.done,this.calculatePercentage())},editItem(t){this.items.forEach(t=>t.editing=!1),this.items[t]&&(this.items[t].editing=!0)},onEditItem(t){this.items[t]&&(this.items[t].editing=!1)},onCloseEditItem(t){this.items[t]&&(this.items[t].editing=!1)},calculatePercentage(){let t=this.items.filter(t=>t.item.done);this.progressValue=Math.round(t.length/this.items.length*100)+"%"}}},Wt=Qt,Xt=(s("915c"),Object(b["a"])(Wt,zt,Ut,!1,null,"0bffdd89",null)),Zt=Xt.exports,Kt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Yt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"activity-container"},[s("div",{staticClass:"activity-description"},[s("strong",[t._v("Alberto Contorno")]),t._v("\n        ha spostato questa scheda da New Features a Planned\n    ")]),s("div",{staticClass:"activity-date"},[t._v("12/05/2019 11:14")]),s("hr")])}],te={name:"ActivityLog"},ee=te,se=(s("f213"),Object(b["a"])(ee,Kt,Yt,!1,null,"53dc1410",null)),ae=se.exports,ie={name:"Modal",props:["iUser"],inject:["modalsService"],data(){return{show__:!1,text:"TestTestTestTestTestTestTestTestTestTestTestT",comment:"",user:{initials:"AC",username:"Alberto Contorno"},showMoreDetails:!1,detail:null,listTitle:"",labels:[],checkLists:[],controller:null}},components:{AutoresizeTextarea:O,UserBadge:Rt,ActivityLog:ae,Button:J,Label:y,CheckList:Zt},methods:{show(t){console.log("OPEN MODAL",t),this.show__=!0},hide(t){this.show__=!1,t&&t.stopPropagation()},intercept(t){t&&t.stopPropagation()},toggle(t){console.log("TOGGLE MODAL",t),this.show__=!this.show__,this.text=t.text,this.detail=t.description,this.listTitle=t.listTitle,this.labels=t.labels},addMoreDetails(t){this.showMoreDetails=!0},closeMoreDetails(){this.showMoreDetails=!1}},mounted:function(){this.controller=this.modalsService.registerModal("cardAdvancedEditModal",this),this.checkLists.push({items:[{text:"todo 1 asdasd adsdasd ",done:!0},{text:"todo 2 asd dsd d adsdasd ",done:!0},{text:"todo 3 353 adsd fdfd3sd ",done:!1},{text:"todo 4 sdg4 adsdf asd ",done:!0},{text:"todo 4 sdg4 adsdf asd ",done:!1}],title:"Test CheckList 1"}),this.checkLists.push({items:[{text:"w 2321 eee adsdasd ",done:!1},{text:"fef 21312 adsdasd ",done:!0}],title:"Test CheckList 2"})},beforeDestroy(){this.modalsService.unregisterModal("cardAdvancedEditModal")}},oe=ie,le=(s("93ce"),Object(b["a"])(oe,Dt,Ot,!1,null,"ecf68698",null)),ne=le.exports;class re{constructor(t,e=!1){this.values=t,this.subscribers=[],this.immediate=e}subscribe(t){return this.subscribers.push(t),this.immediate&&t(this.values),new ce(this.subscribers.length-1,this.subscribers)}notify(){this.subscribers.forEach(t=>t(this.values))}unsubscribe(t){let e=this.subscribers.findIndex(e=>e===t);e>-1&&this.subscribers.splice(e,1)}}class ce{constructor(t,e){this.id=t,this.subscribers=e}unsubscribe(){console.log("Unsubscribe from subject"),this.subscribers.splice(this.id,1)}}class de{constructor(t){this.subscribers={},t&&t.forEach(t=>this.subscribers[t]=[])}subscribe(t,e){if(this.subscribers[t])return this.subscribers[t].push(e),new ue(this.subscribers[t].length-1,this.subscribers[t]);console.warn(`Can't subscribe to event '${t}': not in the list of subscribable events`)}notify(t,e){this.subscribers[t]&&this.subscribers[t].forEach(t=>{t(e)})}}class ue{constructor(t,e){this.id=t,this.subscribers=e}unsubscribe(){console.log("Unsubscribe from observable"),this.subscribers.splice(this.id,1)}}class he{constructor(t){this.labels=new re([],!0),this.db=t,this.eventDispatcher=new de(["add-label","delete-label","edit-label","select-label"])}getLabels(){return this.labels.values&&this.labels.values||[]}update(){this.labels.notify()}addLabel(t){return t.id=this.labels.values.length,this.labels.values.push(t),this.sortLabels("color"),this.eventDispatcher.notify("add-label",t),this.update(),!0}modifyLabel(t,e,s){let a=this.labels.values[t];return!!a&&(a.text=e,a.color=s,this.sortLabels("color"),this.eventDispatcher.notify("edit-label",a),this.update(),!0)}deleteLabel(t){let e=this.labels.values.splice(t,1)[0];return this.eventDispatcher.notify("delete-label",e),this.update(),!0}sortLabels(t){this.labels.values.sort((e,s)=>{return e[t]<s[t]?-1:1})}transformCardLabels(t){if(this.labels.values){let e={};t.forEach(t=>{e[null!=t.id?t.id:t]=!0});let s=[];return this.labels.values.forEach(t=>{e[t.id]&&s.push(t)}),s}}}var be={name:"Board",components:{CardsContainer:ut,AddNewContainer:It,Modal:ne},provide:function(){return{labelsService:this.labelsService}},inject:["boardService","authService"],data(){return{cardsContainers:[],labelsService:new he(this.boardService.db,this.boardService.vm),labels:[],board:null}},methods:{onAddCard(t){console.log("ADD CARD: ",t);let e=this.cardsContainers[t.container],s={id:e.cards.length,labels:[],text:t.text};e.cards.push(s),this.boardService.addCardToList(t.container,s,this.board,this.authService.user.info.uid,e)},onSaveCard(t){console.log("UPDATE CARD",t),this.boardService.upadateCardText(this.board.id,t.card,t.list)},onSaveCardLabels(t){this.boardService.updateCardLabels(this.board.id,t.card,t.list)},onAddNewList(t){let e={id:this.cardsContainers.length,title:t,cards:[]};this.cardsContainers.push(e),this.boardService.addListToBoard(this.board,e)},onSaveBoard(){},async retrieveCards(t,e){return console.log("LISTE ",e),e.forEach(async e=>{e.cards=[];let s=await this.boardService.retrieveCardsOfList(t,e.id);console.log("bhooooo",s),s.forEach(t=>{e.cards.push(t.data())}),this.boardService.currentBoardSubcriptions.push(s.query.onSnapshot(t=>{console.log("CARDS SNAPSHOT",t,t.docs.lengt,t.docChanges()),t.docChanges().forEach(t=>{console.log("SINGLE CARD SNAP",t,t.doc,t.doc.data());const e=t.doc.data();this.board.lists[e.listId]||(this.board.lists[e.listId]={cards:[]}),this.board.lists[e.listId].cards[e.id].text=e.text;const s=this.labelsService.transformCardLabels(e.labels);this.board.lists[e.listId].cards[e.id].labels=s})}))}),e}},mounted(){let t=this.$route.params.id;console.log("open ",t),this.boardService.readBoard(t,this.authService.user.info.uid).then(async t=>{t&&(this.board={id:t.id,lists:await this.retrieveCards(t.id,t.lists),labels:t.labels,members:t.members},this.boardService.currentBoardSubcriptions.push(this.boardService.currentBoardRef.ref.onSnapshot(t=>{console.log("BOARD CHANGED!",t.data()),this.labelsService.labels.values=t.data().labels,this.labelsService.update();let e=t.data().lists,s={};this.board.lists.forEach(t=>s[t.id]=t),e.forEach(t=>{s[t.id]?s[t.id].title=t.title:this.cardsContainers.push(t)})})),this.cardsContainers=t.lists,this.labelsService.labels.values=t.labels,this.labelsService.update(),this.labels=t.labels,this.labelsService.labels.subscribe(t=>this.boardService.updateBoardLabels(this.board.id,t)))})},beforeDestroy(){this.boardService.close()}},me=be,ve=(s("7105"),Object(b["a"])(me,Lt,yt,!1,null,"3d9e2533",null)),fe=ve.exports,pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row boards-row"},[s("div",{staticClass:"col-xs-12 board-new"},[t.showNew?t._e():s("Button",{staticClass:"board-new-btn",attrs:{label:" New Board",classes:"success btn"},on:{click:function(e){return t.newBoard()}}},[s("font-awesome-icon",{staticClass:"icon-right",attrs:{icon:"plus"}})],1),t.showNew?s("div",{staticClass:"row center-xs"},[s("div",{staticClass:"col-xs-12 col-sm-6 col-md-4"},[t._v("\n                Title"),s("Input",{model:{value:t.newTitle,callback:function(e){t.newTitle=e},expression:"newTitle"}}),t._v("\n                private "),s("Input",{attrs:{iType:"checkbox"},model:{value:t.newPrivate,callback:function(e){t.newPrivate=e},expression:"newPrivate"}}),s("Button",{staticClass:"board-new-btn",attrs:{label:"New Board",classes:"success btn",disabled:""==t.newTitle},on:{click:function(e){return t.newBoard(!0)}}})],1)]):t._e()],1),t._l(t.userInfo.boards,(function(e){return s("div",{key:e.id,staticClass:"col-xs-12 col-sm-4 col-md-3 boards-col"},[s("div",{staticClass:" board-el"},[s("div",{staticClass:"board-el-title"},[t._v(t._s(e.title))]),s("div",{staticClass:"row no-margin"},[s("div",{staticClass:"col-xs-12 col-sm-6 col-add-padding-tb"},[s("Button",{staticClass:"w-100",attrs:{label:"Open",classes:"info btn"},on:{click:function(s){return t.openBoard(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"location-arrow"}})],1)],1),s("div",{staticClass:"col-xs-12 col-sm-6 col-add-padding-tb"},[s("Button",{staticClass:"w-100",attrs:{label:"Delete",classes:"error btn"},on:{click:function(s){return t.deleteBoard(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"trash"}})],1)],1)]),s("div",{staticClass:"row no-margin"},[s("div",{staticClass:"col-xs-12 col-sm-6 col-add-padding-tb"},[s("Button",{staticClass:"w-100",attrs:{label:"Options",classes:"info btn"},on:{click:function(s){return t.optionsBoard(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"cogs"}})],1)],1),s("div",{staticClass:"col-xs-12 col-sm-6 col-add-padding-tb"},[s("Button",{staticClass:"w-100",attrs:{label:"Rename",classes:"info btn"},on:{click:function(s){return t.renameBoard(e.id)}}},[s("font-awesome-icon",{attrs:{icon:"pen"}})],1)],1)])])])}))],2)},Ce=[];class we{constructor(t=[],e=[],s=[],a="",i=[],o=null,l=[],n=[],r="",c="",d="",u=[],h=!1){this.comments=t,this.checkLists=e,this.members=s,this.description=a,this.activities=i,this.deadline=o,this.attachments=l,this.labels=n,this.id=r,this.listId=c,this.listTitle=d,this.watchers=u,this.archived=h}}class ge{constructor(t,e,s,a,i,o){this.id=t,this.lists=a||[],this.labels=i||[],this.owner=e||"",this.title=s||"",this.members=[o]}}var _e={name:"Boards",inject:["authService","boardService","utilsService"],components:{Button:J,Input:U},data(){return{title:"",boards:[],userInfo:{},showNew:!1,newTitle:"",newPrivate:!1}},methods:{openBoard(t){this.$router.push("/board/"+t)},deleteBoard(t){console.log("deleteBoard ",t),this.boardService.deleteBoard(t,this.userInfo.boards,this.userInfo.uid)},optionsBoard(t){console.log("optionsBoard ",t)},renameBoard(t){console.log("renameBoard ",t)},newBoard(t=!1){if(t){const t=this.utilsService.uuidv4();let e=new ge(t,"admin",this.newTitle,[],[],this.userInfo.uid);console.log("create a new board"),this.boardService.createBoard(e,this.userInfo.uid),this.userInfo.boards.push(e)}else console.log("show creation new board ");this.showNew=!t}},mounted(){console.log("USER IN BOARDS",this.authService.user),this.userInfo=this.authService.user.info}},xe=_e,Se=(s("f6e8"),Object(b["a"])(xe,pe,Ce,!1,null,"70b6f9e3",null)),Le=Se.exports,ye=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ke=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("h2",[t._v("Home Page")])])])}],Ae={name:"Home"},Ee=Ae,Be=Object(b["a"])(Ee,ye,ke,!1,null,"6ca97a8c",null),Te=Be.exports,Ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"400px",margin:"0 auto"}},[t._m(0),s("div",[s("label",[t._v("\n            Mail\n            "),s("Input",{model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)]),s("div",[s("label",[t._v("\n            Password\n            "),s("Input",{model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),s("div",{staticStyle:{"margin-top":"5px"}},[s("Button",{attrs:{label:"Sign Up",classes:"info"},on:{click:function(e){return t.signup()}}})],1),t._v("\n    "+t._s(t.email+"  "+t.password)+"\n")])},De=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticStyle:{"text-align":"center"}},[t._v("Signup")])])}],Oe={name:"Signup",components:{Input:U,Button:J},inject:["authService"],data(){return{email:"",password:""}},methods:{signup(){console.log("SIGNUP -> mail= ",this.email," pass= ",this.password),this.authService.signup(this.email,this.password)}}},$e=Oe,Me=Object(b["a"])($e,Ie,De,!1,null,"78e2e4a2",null),Ne=Me.exports,je=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"400px",margin:"0 auto"}},[t._m(0),s("form",[s("div",[s("label",[t._v("\n                Mail\n                "),s("Input",{model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)]),s("div",[s("label",[t._v("\n                Password\n                "),s("Input",{attrs:{iType:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),s("div",{staticStyle:{"margin-top":"5px"}},[s("Button",{attrs:{label:"Log In",classes:"success"},on:{click:function(e){return t.login()}}})],1),s("br"),t.showError?s("p",{staticClass:"error-message"},[t._v("The email or the password is invalid.")]):t._e()])])},Pe=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticStyle:{"text-align":"center"}},[t._v("Login")])])}],Re={name:"Login",components:{Input:U,Button:J},inject:["authService"],data(){return{email:"test@test.com",password:"",showError:!1}},methods:{login(){console.log("LOGIN -> mail= ",this.email," pass= ",this.password),this.authService.login(this.email,this.password).then(t=>{console.log(t),this.showError=!1,this.$router.replace("/boards")},t=>{console.log("err",t),this.showError=!0})}}},ze=Re,Ue=(s("87d7"),Object(b["a"])(ze,je,Pe,!1,null,"3f9827ee",null)),Ve=Ue.exports;a["a"].use(St["a"]);const qe=new St["a"]({routes:[{path:"/",name:"Home",component:Te,meta:{require_auth:!1}},{path:"/signup",name:"Signup",component:Ne,meta:{require_auth:!1}},{path:"/login",name:"Login",component:Ve,meta:{require_auth:!1}},{path:"/boards",name:"Boards",component:Le,meta:{require_auth:!0}},{path:"/board/:id",name:"Board",component:fe,meta:{require_auth:!0}}]});qe.beforeEach((t,e,s)=>{console.log(JSON.stringify(qe.app.data),qe.app.authService),console.log("TO ",t," FROM ",e," NEXT"),t.meta.require_auth?qe.app.authService&&qe.app.authService.user?s():s("/login"):s()});var He=qe,Fe=s("ecee"),Ge=s("c074"),Je=s("ad3d");class Qe{constructor(t){t||(this.db=o.a.firestone()),this.currentBoardRef=null,this.db=t,this.utils=null,this.currentBoardSubcriptions=[]}async createBoard(t,e){await this.db.collection("boards_v2").doc(t.id).get().then(async s=>{s.exists?(t.id=this.utils.uuidv4(),this.createBoard(t,e)):await this.db.collection("boards_v2").doc(t.id).set(Object.assign({},t)).then(async s=>{await this.db.collection("users").doc(e.trim()).update({boards:o.a.firestore.FieldValue.arrayUnion({id:t.id,title:t.title})}).then(t=>console.log("upadate user boards")).catch(t=>console.log("error updating user boards ",t))})})}async readBoard(t){let e;return await this.db.collection("boards_v2").doc(t).get().then(t=>{this.currentBoardRef=t,e=t.data()}),console.log(`[READ BOARD (${t})]`,e),e}close(){this.currentBoardSubcriptions&&this.currentBoardSubcriptions.forEach(t=>{t()}),this.currentBoardSubcriptions=[]}updateBoard(t){this.db.collection("boards_v2").doc(t.id).update(t).then(e=>console.log("upadate board ",t.id)).catch(e=>console.log("error updating board ",t.id,e))}async deleteBoard(t,e,s){let a=e.findIndex(e=>e.id==t);await this.db.collection("boards_v2").doc(t).set({deleted:!0}).then(async t=>{let i={id:e[a].id,title:e[a].title};await this.db.collection("users").doc(s.trim()).update({boards:o.a.firestore.FieldValue.arrayRemove(i)}).then(t=>e.splice(a,1)).catch(t=>console.log("error updating user boards ",t))})}addCardToList(t,e,s,a,i){console.log(t,e,s.id,a,i);let l=new we;l.activities.push({date:o.a.firestore.Timestamp.fromDate(new Date),description:"Card Created",user:a}),l.listId=t,l.listTitle=i.title,l.members.push(...s.members),l.id=""+t+e.id,l=JSON.parse(JSON.stringify(l)),e.members=[...s.members],e.listId=t,e.position=e.id;let n=s.id;this.db.collection("boards_v2").doc(n).collection("cardsInfo").doc(""+t+e.id).set(l).then(s=>{this.db.collection("boards_v2").doc(n).collection("cardsInfo").doc(""+t+e.id).get().then(s=>{e.cardInfo=s.ref,this.db.collection("boards_v2").doc(n).collection("lists").doc(t+"").collection("cards").doc(e.id+"").set(e)})})}addListToBoard(t,e){const s=t.lists;this.db.collection("boards_v2").doc(t.id).update({lists:s}).then(e=>{this.db.collection("boards_v2").doc(t.id).collection("lists").doc(s.length-1+"").set({})})}getBoardLists(t,e){this.db.collection("boards").doc(e.trim()).collection("boards").doc(t).collection("cards").get().then(t=>console.log("cards",t))}async retrieveCardsOfList(t,e){return this.db.collection("boards_v2").doc(t).collection("lists").doc(e+"").collection("cards").get()}upadateCardText(t,e,s){this.db.collection("boards_v2").doc(t).collection("lists").doc(s.id+"").collection("cards").doc(e.id+"").update({text:e.text})}updateCardLabels(t,e,s){const a=e.labels.map(t=>t.id);this.db.collection("boards_v2").doc(t).collection("lists").doc(s.id+"").collection("cards").doc(e.id+"").update({labels:a})}updateBoardLabels(t,e){console.log("UPDATE BOARD LABELS"),this.db.collection("boards_v2").doc(t).update({labels:e})}}class We{uuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}}class Xe{constructor(){this.modals={},this.activeModal=""}registerModal(t,e){return this.modals[t]=new mt,this.modals[t].setModal(e),this.modals[t]}unregisterModal(t){this.modals[t]&&(this.modals[t].close(),this.modals[t].setModal(null),this.modals[t]=null)}openModal(t,e){this.modals[t]&&(this.modals[this.activeModal]&&this.modals[this.activeModal].close(),this.modals[t].open(e),this.activeModal=t)}closeModal(t,e){this.modals[t]&&(this.activeModa="",this.modals[t].close(e))}toggleModal(t,e){this.modals[t]&&this.modals[t].toggle(e)}}Fe["c"].add(Ge["r"]),Fe["c"].add(Ge["w"]),Fe["c"].add(Ge["z"]),Fe["c"].add(Ge["d"]),Fe["c"].add(Ge["i"]),Fe["c"].add(Ge["y"]),Fe["c"].add(Ge["m"]),Fe["c"].add(Ge["x"]),Fe["c"].add(Ge["a"]),Fe["c"].add(Ge["k"]),Fe["c"].add(Ge["o"]),Fe["c"].add(Ge["e"]),Fe["c"].add(Ge["g"]),Fe["c"].add(Ge["h"]),Fe["c"].add(Ge["q"]),Fe["c"].add(Ge["l"]),Fe["c"].add(Ge["n"]),Fe["c"].add(Ge["b"]),Fe["c"].add(Ge["u"]),Fe["c"].add(Ge["s"]),Fe["c"].add(Ge["f"]),Fe["c"].add(Ge["c"]),Fe["c"].add(Ge["p"]),Fe["c"].add(Ge["t"]),Fe["c"].add(Ge["j"]),Fe["c"].add(Ge["v"]),a["a"].component("font-awesome-icon",Je["a"]),a["a"].config.productionTip=!1;const Ze={apiKey:"AIzaSyDInHbmAAHBQwZnQAMZFjGX8hydmkVNnwQ",authDomain:"trellocover.firebaseapp.com",databaseURL:"https://trellocover.firebaseio.com",projectId:"trellocover",storageBucket:"trellocover.appspot.com",messagingSenderId:"255472644984",appId:"1:255472644984:web:06d7662e09d7f167"};o.a.initializeApp(Ze);const Ke=o.a.firestore();new a["a"]({router:He,render:t=>t(xt),provide(){return{authService:this.authService,boardService:this.boardService,utilsService:this.utilsService,modalsService:this.modalsService}},data:{db:Ke,authService:new r(Ke),boardService:new Qe(Ke),utilsService:new We,modalsService:new Xe},mounted(){console.log("APP MOUNTED",this),this.authService.db=this.db,this.authService.vm=this,this.boardService.db=this.db,this.boardService.vm=this,this.boardService.utils=this.utilsService}}).$mount("#app")},"64a9":function(t,e,s){},"6ffc":function(t,e,s){},7105:function(t,e,s){"use strict";var a=s("ed79"),i=s.n(a);i.a},"78d3":function(t,e,s){},"847a":function(t,e,s){"use strict";var a=s("8e02"),i=s.n(a);i.a},"86c6":function(t,e,s){"use strict";var a=s("b6c2"),i=s.n(a);i.a},"87d7":function(t,e,s){"use strict";var a=s("5460"),i=s.n(a);i.a},"88ea":function(t,e,s){"use strict";var a=s("6ffc"),i=s.n(a);i.a},"8e02":function(t,e,s){},"915c":function(t,e,s){"use strict";var a=s("78d3"),i=s.n(a);i.a},9174:function(t,e,s){},"93ce":function(t,e,s){"use strict";var a=s("ba33"),i=s.n(a);i.a},a0e8:function(t,e,s){},aa09:function(t,e,s){"use strict";var a=s("c96d"),i=s.n(a);i.a},b0d5:function(t,e,s){"use strict";var a=s("07df"),i=s.n(a);i.a},b6c2:function(t,e,s){},ba33:function(t,e,s){},bbdf:function(t,e,s){},c58f:function(t,e,s){},c805:function(t,e,s){"use strict";var a=s("35ab"),i=s.n(a);i.a},c96d:function(t,e,s){},ea61:function(t,e,s){},ed79:function(t,e,s){},eee8:function(t,e,s){},f213:function(t,e,s){"use strict";var a=s("a0e8"),i=s.n(a);i.a},f6e8:function(t,e,s){"use strict";var a=s("010a"),i=s.n(a);i.a},f979:function(t,e,s){"use strict";var a=s("5656"),i=s.n(a);i.a}});
//# sourceMappingURL=app.29acc1cc.js.map